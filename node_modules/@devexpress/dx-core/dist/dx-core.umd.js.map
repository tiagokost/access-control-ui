{"version":3,"file":"dx-core.umd.js","sources":["../src/utils.js","../src/plugin-host.js","../src/event-emitter.js","../src/shallow-equal.js","../src/memoize.js","../src/easings.js"],"sourcesContent":["const compare = (a, b) => {\n  const aPosition = a.position();\n  const bPosition = b.position();\n  for (let i = 0; i < Math.min(aPosition.length, bPosition.length); i += 1) {\n    if (aPosition[i] < bPosition[i]) return -1;\n    if (aPosition[i] > bPosition[i]) return 1;\n  }\n  return aPosition.length - bPosition.length;\n};\n\nexport const insertPlugin = (array, newItem) => {\n  const result = array.slice();\n  const nextItemIndex = array.findIndex(item => compare(newItem, item) <= 0);\n  const targetIndex = nextItemIndex < 0 ? array.length : nextItemIndex;\n  const alreadyExists = (targetIndex >= 0 && targetIndex < array.length)\n    && compare(newItem, array[targetIndex]) === 0;\n  result.splice(targetIndex, alreadyExists ? 1 : 0, newItem);\n  return result;\n};\n","import { insertPlugin } from './utils';\n\nconst getDependencyError = (pluginName, dependencyName) => new Error(`The '${pluginName}' plugin requires '${dependencyName}' to be defined before it.`);\n\nexport class PluginHost {\n  constructor() {\n    this.plugins = [];\n    this.subscriptions = new Set();\n    this.gettersCache = {};\n  }\n\n  ensureDependencies() {\n    const defined = new Set();\n    const knownOptionals = new Map();\n    this.plugins\n      .filter(plugin => plugin.container)\n      .forEach((plugin) => {\n        if (knownOptionals.has(plugin.name)) {\n          throw (getDependencyError(knownOptionals.get(plugin.name), plugin.name));\n        }\n\n        plugin.dependencies\n          .forEach((dependency) => {\n            if (defined.has(dependency.name)) return;\n            if (dependency.optional) {\n              if (!knownOptionals.has(dependency.name)) {\n                knownOptionals.set(dependency.name, plugin.name);\n              }\n              return;\n            }\n            throw (getDependencyError(plugin.name, dependency.name));\n          });\n\n        defined.add(plugin.name);\n      });\n  }\n\n  registerPlugin(plugin) {\n    this.plugins = insertPlugin(this.plugins, plugin);\n    this.cleanPluginsCache();\n  }\n\n  unregisterPlugin(plugin) {\n    this.plugins.splice(this.plugins.indexOf(plugin), 1);\n    this.cleanPluginsCache();\n  }\n\n  cleanPluginsCache() {\n    this.validationRequired = true;\n    this.gettersCache = {};\n    this.knownKeysCache = {};\n  }\n\n  knownKeys(postfix) {\n    if (!this.knownKeysCache[postfix]) {\n      this.knownKeysCache[postfix] = Array.from(this.plugins\n        .map(plugin => Object.keys(plugin))\n        .map(keys => keys.filter(key => key.endsWith(postfix))[0])\n        .filter(key => !!key)\n        .reduce((acc, key) => acc.add(key), new Set()))\n        .map(key => key.replace(postfix, ''));\n    }\n    return this.knownKeysCache[postfix];\n  }\n\n  collect(key, upTo) {\n    if (this.validationRequired) {\n      this.ensureDependencies();\n      this.validationRequired = false;\n    }\n\n    if (!this.gettersCache[key]) {\n      this.gettersCache[key] = this.plugins.map(plugin => plugin[key]).filter(plugin => !!plugin);\n    }\n    if (!upTo) return this.gettersCache[key];\n\n    const upToIndex = this.plugins.indexOf(upTo);\n    return this.gettersCache[key].filter((getter) => {\n      const pluginIndex = this.plugins.findIndex(plugin => plugin[key] === getter);\n      return pluginIndex < upToIndex;\n    });\n  }\n\n  get(key, upTo) {\n    const plugins = this.collect(key, upTo);\n\n    if (!plugins.length) return undefined;\n\n    let result = plugins[0]();\n    plugins.slice(1).forEach((plugin) => {\n      result = plugin(result);\n    });\n    return result;\n  }\n\n  registerSubscription(subscription) {\n    this.subscriptions.add(subscription);\n  }\n\n  unregisterSubscription(subscription) {\n    this.subscriptions.delete(subscription);\n  }\n\n  broadcast(event, message) {\n    this.subscriptions.forEach(subscription => subscription[event] && subscription[event](message));\n  }\n}\n","export class EventEmitter {\n  constructor() {\n    this.handlers = [];\n  }\n\n  emit(e) {\n    this.handlers.forEach(handler => handler(e));\n  }\n\n  subscribe(handler) {\n    this.handlers.push(handler);\n  }\n\n  unsubscribe(handler) {\n    this.handlers.splice(this.handlers.indexOf(handler), 1);\n  }\n}\n","export function shallowEqual(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  const hasOwn = Object.prototype.hasOwnProperty;\n  for (let i = 0; i < keysA.length; i += 1) {\n    if (!hasOwn.call(objB, keysA[i])\n        || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n\n    const valA = objA[keysA[i]];\n    const valB = objB[keysA[i]];\n\n    if (valA !== valB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function argumentsShallowEqual(prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  for (let i = 0; i < prev.length; i += 1) {\n    if (prev[i] !== next[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import { argumentsShallowEqual } from './shallow-equal';\n\nexport const memoize = (func) => {\n  let lastArgs = null;\n  let lastResult = null;\n  return (...args) => {\n    if (lastArgs === null || !argumentsShallowEqual(lastArgs, args)) {\n      lastResult = func(...args);\n    }\n    lastArgs = args;\n    return lastResult;\n  };\n};\n","export const easeInQuad = t => t * t;\nexport const easeOutQuad = t => t * (2 - t);\nexport const easeInOutQuad = t => (t < 0.5\n  ? 2 * t * t\n  : -1 + ((4 - (2 * t)) * t));\n\nexport const easeInCubic = t => t * t * t;\nexport const easeOutCubic = t => ((t - 1) * (t - 1) * (t - 1)) + 1;\nexport const easeInOutCubic = t => (t < 0.5\n  ? 4 * t * t * t\n  : ((t - 1) * ((2 * t) - 2) * ((2 * t) - 2)) + 1);\n\nexport const easeInQuart = t => t * t * t * t;\nexport const easeOutQuart = t => 1 - ((t - 1) * (t - 1) * (t - 1) * (t - 1));\nexport const easeInOutQuart = t => (t < 0.5\n  ? 8 * t * t * t * t\n  : 1 - (8 * (t - 1) * (t - 1) * (t - 1) * (t - 1)));\n\nexport const easeInQuint = t => t * t * t * t * t;\nexport const easeOutQuint = t => 1 + ((t - 1) * (t - 1) * (t - 1) * (t - 1) * (t - 1));\nexport const easeInOutQuint = t => (t < 0.5\n  ? 16 * t * t * t * t * t\n  : 1 + (16 * (t - 1) * (t - 1) * (t - 1) * (t - 1) * (t - 1)));\n"],"names":["compare","a","b","aPosition","position","bPosition","i","Math","min","length","insertPlugin","array","newItem","result","slice","nextItemIndex","findIndex","item","targetIndex","alreadyExists","splice","getDependencyError","pluginName","dependencyName","Error","PluginHost","plugins","subscriptions","Set","gettersCache","defined","knownOptionals","Map","filter","plugin","container","forEach","has","name","get","dependencies","dependency","optional","set","add","cleanPluginsCache","indexOf","validationRequired","knownKeysCache","postfix","Array","from","map","Object","keys","key","endsWith","reduce","acc","replace","upTo","ensureDependencies","upToIndex","getter","pluginIndex","collect","undefined","subscription","delete","event","message","EventEmitter","handlers","e","handler","push","shallowEqual","objA","objB","keysA","keysB","hasOwn","prototype","hasOwnProperty","call","valA","valB","argumentsShallowEqual","prev","next","memoize","func","lastArgs","lastResult","args","easeInQuad","t","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint"],"mappings":"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"}